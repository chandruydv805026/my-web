<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ratu Fresh ‚Äì ‡§Ü‡§™‡§ï‡§æ ‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #fffbe6, #fff);
      color: #333;
      font-size: 16px;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* Navbar */
    .ratu-navbar {
      background: linear-gradient(to right, #43cea2, #185a9d);
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: white;
      flex-wrap: wrap;
    }
    .ratu-navbar .brand-tagline {
      font-size: 18px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .ratu-navbar .icons {
      display: flex;
      gap: 16px;
    }
    .nav-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    .nav-icon:hover {
      transform: scale(1.05);
    }
    .nav-icon img {
      width: 22px;
      height: 22px;
      margin-bottom: 2px;
    }
    .nav-icon label {
      font-size: 10px;
      color: #f0f0f0;
    }

    /* Hero */
    .hero {
      text-align: center;
      padding: 60px 20px 40px;
      background: linear-gradient(to right, #fdfbfb, #ebedee);
      border-radius: 0 0 20px 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }
    .hero h2 {
      font-size: 26px;
      margin-bottom: 10px;
      color: #2c3e50;
    }
    .hero p {
      font-size: 16px;
      color: #555;
    }

    /* Products */
    .products {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1rem;
      padding: 2rem;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.08);
      padding: 1rem;
      text-align: center;
      transition: transform 0.2s ease;
    }
    .card:hover {
      transform: translateY(-4px);
    }
    .card img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: 8px;
    }
    .card select {
      margin: 10px 0;
      padding: 6px;
      font-size: 16px;
    }
    .card button {
      background-color: #43cea2;
      border: none;
      padding: 10px 16px;
      border-radius: 6px;
      color: white;
      font-weight: 600;
      font-size: 15px;
      transition: background 0.3s ease;
    }
    .card button:hover {
      background-color: #2abf91;
    }
    .card button:active {
      transform: scale(0.96);
    }

    /* Profile Box */
    #profileBox {
      display: none;
      position: absolute;
      top: 70px;
      right: 20px;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 999;
      width: 250px;
      transition: all 0.3s ease;
    }
    #profileBox p {
      margin-bottom: 8px;
      font-size: 15px;
    }

    /* Popup */
    .popup {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: #00c9a7;
      color: #fff;
      padding: 14px 24px;
      border-radius: 10px;
      font-size: 15px;
      font-weight: 500;
      box-shadow: 0 4px 12px rgba(0, 201, 167, 0.4);
      opacity: 0;
      transition: opacity 0.3s ease, bottom 0.3s ease;
      z-index: 1000;
      text-align: center;
      max-width: 90%;
      word-wrap: break-word;
    }
    .popup.show {
      bottom: 50px;
      opacity: 1;
    }
    .popup.error {
      background: #ff4d4d;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 16px 10px;
      font-size: 13px;
      color: #888;
      background-color: #f9f9f9;
      border-top: 1px solid #ddd;
    }

    /* Mobile */
    @media (max-width: 600px) {
      .ratu-navbar {
        flex-direction: column;
        align-items: flex-start;
      }
      .ratu-navbar .icons {
        justify-content: space-around;
        width: 100%;
        margin-top: 8px;
      }
      .nav-icon img {
        width: 18px;
        height: 18px;
      }
      .nav-icon label {
        font-size: 9px;
      }
      #profileBox {
        right: 5%;
        top: 60px;
        width: 90%;
        animation: slideIn 0.3s ease;
      }
      @keyframes slideIn {
        from { opacity: 0; transform: translateY(-10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .hero h2 {
        font-size: 22px;
      }
      .hero p {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>

<nav class="ratu-navbar">
  <div class="brand-tagline">ü•¨ Ratu Fresh ‚Äì ‡§§‡§æ‡§ú‡§º‡§ó‡•Ä ‡§π‡§∞ ‡§∏‡•Å‡§¨‡§π</div>
  <div class="icons">
    <span onclick="window.location.href='cart.html'" class="nav-icon" title="Cart">
      <img src="https://cdn-icons-png.flaticon.com/512/1170/1170678.png" alt="Cart" />
      <label>Cart</label>
    </span>
    <span onclick="window.location.href='orders.html'" class="nav-icon" title="Orders">
      <img src="https://cdn-icons-png.flaticon.com/512/3500/3500833.png" alt="Orders" />
      <label>Orders</label>
    </span>
    <span onclick="toggleProfile()" class="nav-icon" title="Profile">
      <img src="https://cdn-icons-png.flaticon.com/512/9131/9131529.png" alt="Profile" />
      <label>Profile</label>
    </span>
  </div>
</nav>

<div id="popup" class="popup"></div>

<div id="profileBox">
  <p><strong>‡§®‡§æ‡§Æ:</strong> <span id="profile-name"></span></p>
  <p><strong>‡§à‡§Æ‡•á‡§≤:</strong> <span id="profile-email"></span></p>
  <p><strong>‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤:</strong> <span id="profile-phone"></span></p>
  <p><strong>‡§™‡§§‡§æ:</strong> <span id="profile-address"></span></p>
  <button onclick="logout()" style="margin-top:10px; background:#e74c3c; color:white; border:none; padding:8px 12px; border-radius:6px; cursor:pointer;">üö™ Logout</button>
</div>

<div class="hero">
  <h2>‡§∏‡§¨‡•ç‡§ú‡§º‡§ø‡§Ø‡§æ‡§Å ‡§Ü‡§™‡§ï‡•á ‡§¶‡§∞‡§µ‡§æ‡§ú‡§º‡•á ‡§§‡§ï</h2>
  <p>‡§π‡§∞ ‡§∏‡•Å‡§¨‡§π ‡§ï‡•Ä ‡§§‡§æ‡§ú‡§º‡§ó‡•Ä ‡§Ö‡§¨ Ratu ‡§Æ‡•á‡§Ç! ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§∏‡§¨‡•ç‡§ú‡§º‡§ø‡§Ø‡§æ‡§Å ‡§∏‡•Ä‡§ß‡•á ‡§ò‡§∞ ‡§™‡§∞ ‡§™‡§æ‡§è‡§Ç‡•§</p>
</div>

<section class="products" id="productSection">
  <!-- Product cards dynamically inserted here -->
</section>

<footer>
  ¬© 2025 Chandan Yadav, Ratu Jharkhand. All

<script>
  const products = [
 { id: 'aloo', name: '‡§Ü‡§≤‡•Ç', price: 20, img: 'https://upload.wikimedia.org/wikipedia/commons/a/ab/Patates.jpg' },
  { id: 'tomato', name: '‡§ü‡§Æ‡§æ‡§ü‡§∞', price: 30, img: 'https://upload.wikimedia.org/wikipedia/commons/8/89/Tomato_je.jpg' },
  { id: 'onion', name: '‡§™‡•ç‡§Ø‡§æ‡§ú‡§º', price: 25, img: 'https://media.istockphoto.com/id/1181631588/photo/onions-for-sale-in-the-weekly-market-malkapur-maharashtra.webp?a=1&b=1&s=612x612&w=0&k=20&c=dzL0b1DNEWUehYWVqYzY9qE-ZK88KJgO6eY-etuQYoc=' },
  { id: 'bhindi', name: '‡§≠‡§ø‡§Ç‡§°‡•Ä', price: 35, img: 'https://media.istockphoto.com/id/1503362390/photo/okra-over-wooden-table-background-cut-okra-and-whole-ladys-finger.jpg?s=1024x1024&w=is&k=20&c=xYk1xHhyPEMiZzYxaBu5IMyqXK3qdrlCVVFh8Yy4GgM=' },
  { id: 'lauki', name: '‡§≤‡•å‡§ï‡•Ä', price: 18, img: 'https://media.istockphoto.com/id/1194258667/photo/bottle-gourd-for-sale-in-market.jpg?s=1024x1024&w=is&k=20&c=rmDr-KGaiUEaxCqaEQ6e_MakDj6klaXYE-StTySjPUM=' },
  { id: 'karela', name: '‡§ï‡§∞‡•á‡§≤‡§æ', price: 28, img: 'https://media.istockphoto.com/id/472402096/photo/top-view-of-green-bitter-gourds-in-the-basket.jpg?s=612x612&w=0&k=20&c=n7Ua0o7X4Qe_FSfl38ufHIPslxofgkyNpa2Z2NXmBfM=' },
  { id: 'gajar', name: '‡§ó‡§æ‡§ú‡§∞', price: 22, img: 'https://images.unsplash.com/photo-1633380110125-f6e685676160?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8Y2Fycm90fGVufDB8fDB8fHww&auto=format&fit=crop&q=60&w=600' },
  { id: 'mooli', name: '‡§Æ‡•Ç‡§≤‡•Ä', price: 15, img: 'https://media.istockphoto.com/id/903099876/photo/fresh-vegetable-for-sale-on-market-in-india.webp?a=1&b=1&s=612x612&w=0&k=20&c=9oElMWTKZOzIny5ND9MESWmEgG-ONAINWzQL8tSrF04=' },
  { id: 'baingan', name: '‡§¨‡•à‡§Ç‡§ó‡§®', price: 26, img: 'https://images.unsplash.com/photo-1613881553903-4543f5f2cac9?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8YnJpbmphbHxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&q=60&w=600' },
  { id: 'shimla', name: '‡§∂‡§ø‡§Æ‡§≤‡§æ ‡§Æ‡§ø‡§∞‡•ç‡§ö', price: 40, img: 'https://media.istockphoto.com/id/137350104/photo/green-peppers.webp?a=1&b=1&s=612x612&w=0&k=20&c=7u2DZpZoSZIWkSDyvAbxkvNU09BrvPdQCPzM4LcsxvU=' },
  { id: 'mirch', name: '‡§π‡§∞‡•Ä ‡§Æ‡§ø‡§∞‡•ç‡§ö', price: 45, img: 'https://media.istockphoto.com/id/942849220/photo/ripe-green-chilli-pepper.webp?a=1&b=1&s=612x612&w=0&k=20&c=qsUq5pSQ7j7T4O8UMEUiSgdSSt5DlKybwc7QS_o9Oao=' },
  { id: 'palak', name: '‡§™‡§æ‡§≤‡§ï', price: 20, img: 'https://images.unsplash.com/photo-1576045057995-568f588f82fb?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8U3BpbmFjaHxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&q=60&w=600' },
  { id: 'methi', name: '‡§Æ‡•á‡§•‡•Ä', price: 22, img: 'https://media.istockphoto.com/id/153556198/photo/methi.webp?a=1&b=1&s=612x612&w=0&k=20&c=-wKqvG-vDYf-QVH8D3P2TAxMk-Eryd6haPNtsQBxGrk=' },
  { id: 'sarso', name: '‡§∏‡§∞‡§∏‡•ã‡§Ç', price: 24, img: 'https://media.istockphoto.com/id/641036946/photo/edible-mustard-leaves.webp?a=1&b=1&s=612x612&w=0&k=20&c=gIn92_8eHjFUDcWkN14jJL3ku7nhrnw5BtshSCdsW0c=' },
  { id: 'patta', name: '‡§™‡§§‡•ç‡§§‡§æ ‡§ó‡•ã‡§≠‡•Ä', price: 19, img: 'https://media.istockphoto.com/id/2225922723/photo/fresh-green-cabbages-in-a-market-basket.webp?a=1&b=1&s=612x612&w=0&k=20&c=CTgx7YR6b8cJq1jLs0UbelWSqN0dx9N4t3z7pk8b27U=' },
  { id: 'phool', name: '‡§´‡•Ç‡§≤ ‡§ó‡•ã‡§≠‡•Ä', price: 30, img:  'https://media.istockphoto.com/id/1372304664/photo/group-of-cauliflower-fresh-cauliflower-for-sale-at-a-market.webp?a=1&b=1&s=612x612&w=0&k=20&c=lEwN90TtHLVx-r3U9GRyRKmXKzfW4tdeUWRWAcOCX7k=' },
  { id: 'lemon', name: '‡§®‡•Ä‡§Ç‡§¨‡•Ç', price: 10, img: 'https://media.istockphoto.com/id/871706470/photo/group-of-fresh-lemon-on-an-old-vintage-wooden-table.webp?a=1&b=1&s=612x612&w=0&k=20&c=y-meMhMc9CK-Mtz8vM6JRaIOEeiXPcnbdsGca-KCogM=' },
  { id: 'lahsoon', name: '‡§≤‡§π‡§∏‡•Å‡§®', price: 21, img: 'https://media.istockphoto.com/id/531644839/photo/garlic.webp?a=1&b=1&s=612x612&w=0&k=20&c=kABuNBJXIiwWun2GETzq_Gn_u3M9MlxgTfBFLOZYrnU=' },
  { id: 'arbi', name: '‡§Ö‡§∞‡§¨‡•Ä', price: 27, img: 'https://media.istockphoto.com/id/1200642688/photo/eddoes.webp?a=1&b=1&s=612x612&w=0&k=20&c=HWw27eB0yUyGaP8SDrOktNkL8_Jj9kmBskf5wsZ9u8U=' },
  { id: 'chana', name: '‡§π‡§∞‡§æ ‡§ö‡§®‡§æ', price: 32, img: 'https://media.istockphoto.com/id/899854420/photo/fresh-green-chickpeas-or-chick-peas-also-known-as-harbara-or-harbhara-in-hindi-and-cicer-is.webp?a=1&b=1&s=612x612&w=0&k=20&c=B_zR-xU5c5WDsJTvZKJAq2MkTJwJ--autmPGFPPoQ3w=' }
];
let cart = [];

function showPopup(message, isError = false) {
  const popup = document.getElementById("popup");
  popup.textContent = message;
  popup.classList.add("show");
  popup.classList.toggle("error", isError);
  setTimeout(() => {
    popup.classList.remove("show");
  }, 3000);
}

function renderProducts() {
  const section = document.getElementById("productSection");
  section.innerHTML = "";
  products.forEach(prod => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <img src="${prod.img}" alt="${prod.name}" />
      <h3>${prod.name}</h3>
      <p>‚Çπ${prod.price} / ‡§ï‡§ø‡§≤‡•ã</p>
      <select id="qty-${prod.id}" onchange="updatePrice('${prod.id}', ${prod.price})">
        ${[1,2,3,4,5,6,7,8,9,10].map(q =>
          `<option value="${q}" ${q === 1 ? 'selected' : ''}>${q} ‡§ï‡§ø‡§≤‡•ã</option>`
        ).join('')}
      </select>
      <p id="price-${prod.id}">‡§ï‡•Å‡§≤ ‡§ï‡•Ä‡§Æ‡§§: ‚Çπ${prod.price}</p>
      <button onclick="addToCart('${prod.name}', ${prod.price}, 'qty-${prod.id}')">Add to Cart</button>
    `;
    section.appendChild(card);
  });
}

function updatePrice(id, rate) {
  const qty = parseFloat(document.getElementById("qty-" + id).value);
  const total = Math.round(rate * qty);
  document.getElementById("price-" + id).textContent = `‡§ï‡•Å‡§≤ ‡§ï‡•Ä‡§Æ‡§§: ‚Çπ${total}`;
}

function addToCart(name, rate, selectId) {
  const user = JSON.parse(localStorage.getItem("userData"));
  const token = localStorage.getItem("token");

  if (!user || !user._id || !token) {
    showPopup("‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç", true);
    window.location.href = "login.html";
    return;
  }

  const qty = parseFloat(document.getElementById(selectId).value);
  const total = Math.round(rate * qty);
  const label = qty < 1 ? `${qty * 1000} ‡§ó‡•ç‡§∞‡§æ‡§Æ` : `${qty} ‡§ï‡§ø‡§≤‡•ã`;

  fetch("https://my-web-xrr5.onrender.com/cart/add", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "Authorization": `Bearer ${token}`
    },
    body: JSON.stringify({
      userId: user._id,
      productId: name,
      name: name,
      quantity: qty,
      price: rate
    })
  })
  .then(res => res.json())
  .then(data => {
    if (data.cart) {
      cart = data.cart.items;
      showPopup(`‚úÖ ${label} ${name} ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ‡•§ ‡§ï‡•Å‡§≤ ‚Çπ${total}`);
    } else {
      console.error("Backend error:", data);
      showPopup("‚ùå ‡§ï‡•Å‡§õ ‡§ó‡§°‡§º‡§¨‡§°‡§º ‡§π‡•ã ‡§ó‡§à: " + (data.error || "Unknown error"), true);
    }
  })
  .catch(err => {
    console.error("Cart error:", err);
    showPopup("‚ùå Cart ‡§ú‡•ã‡§°‡§º‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•Å‡§à", true);
  });
}

function toggleProfile() {
  const box = document.getElementById("profileBox");
  box.style.display = box.style.display === "block" ? "none" : "block";
}

function logout() {
  localStorage.removeItem("userData");
  localStorage.removeItem("token");
  showPopup("‚úÖ ‡§Ü‡§™ ‡§≤‡•â‡§ó‡§Ü‡§â‡§ü ‡§π‡•ã ‡§ó‡§è ‡§π‡•à‡§Ç");
  setTimeout(() => {
    window.location.href = "main.html";
  }, 1500);
}


window.onload = function () {
  renderProducts();
  products.forEach(p => updatePrice(p.id, p.price));

  const user = JSON.parse(localStorage.getItem("userData"));
  if (user && user._id) {
    document.getElementById("profile-name").textContent = user.name || "‡§®‡§æ‡§Æ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ";
    document.getElementById("profile-email").textContent = user.email || "‡§à‡§Æ‡•á‡§≤ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ";
    document.getElementById("profile-phone").textContent = user.phone || "‡§´‡•ã‡§® ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ";
    document.getElementById("profile-address").textContent = user.address || "‡§™‡§§‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ";
  } else {
    showPopup("User data ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ, ‡§ï‡•É‡§™‡§Ø‡§æ login ‡§ï‡§∞‡•á‡§Ç", true);
    window.location.href = "login.html";
  }
};

  
    
       
    
</script>
</body>
</html>


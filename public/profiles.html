<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="theme-color" content="#2ecc71">
  <meta name="description" content="Ratu Fresh - User Profile & Shopping">
  <title>Ratu Fresh ‚Äì ‡§Ü‡§™‡§ï‡§æ ‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤ ü•¨</title>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: #2ecc71;
      --primary-dark: #27ae60;
      --secondary: #3498db;
      --tertiary: #e74c3c;
      --text-dark: #2c3e50;
      --text-light: #7f8c8d;
      --border-color: #ecf0f1;
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      --shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.15);
      --bg-light: #f5f7fa;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      color: var(--text-dark);
      line-height: 1.6;
      min-height: 100vh;
      padding-bottom: 120px;
    }

    /* ============= NAVBAR ============= */
    .ratu-navbar {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      padding: 15px 20px;
      text-align: center;
      box-shadow: var(--shadow);
      position: sticky;
      top: 0;
      z-index: 100;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .brand-tagline {
      font-size: 20px;
      font-weight: 700;
      color: #fff;
      letter-spacing: 0.5px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
      flex: 1;
    }

    .notification-bell {
      width: 32px;
      height: 32px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 18px;
      position: relative;
    }

    .notification-bell:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.1);
    }

    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: #ff4d4d;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 700;
    }

    /* ============= POPUP ============= */
    .popup {
      position: fixed;
      bottom: -100px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--primary);
      color: #fff;
      padding: 16px 24px;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 500;
      box-shadow: var(--shadow);
      opacity: 0;
      transition: all 0.3s ease;
      z-index: 1000;
      text-align: center;
      max-width: 90%;
      pointer-events: none;
    }

    .popup.show {
      bottom: 30px;
      opacity: 1;
    }

    .popup.error {
      background: var(--tertiary);
    }

    .popup.warning {
      background: #f39c12;
    }

    /* ============= PROFILE MODAL (HIDDEN BY DEFAULT) ============= */
    .profile-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      z-index: 500;
      justify-content: center;
      align-items: flex-start;
      padding-top: 20px;
      overflow-y: auto;
    }

    .profile-modal.show {
      display: flex;
    }

    .profile-modal-content {
      background: #fff;
      width: 90%;
      max-width: 600px;
      border-radius: 16px;
      padding: 30px;
      box-shadow: var(--shadow-hover);
      animation: slideUp 0.4s ease-out;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .profile-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      border-bottom: 2px solid var(--primary);
      padding-bottom: 15px;
    }

    .profile-modal-header h2 {
      color: var(--text-dark);
      font-size: 24px;
    }

    .close-btn {
      background: var(--border-color);
      border: none;
      font-size: 24px;
      cursor: pointer;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .close-btn:hover {
      background: var(--tertiary);
      color: white;
      transform: scale(1.1);
    }

    /* ============= PROFILE SECTIONS ============= */
    .profile-section {
      margin-bottom: 20px;
    }

    .profile-section h3 {
      font-size: 12px;
      color: var(--text-light);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 12px;
      font-weight: 700;
    }

    .profile-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid var(--border-color);
      font-size: 15px;
    }

    .profile-item:last-child {
      border-bottom: none;
    }

    .profile-item strong {
      color: var(--text-dark);
      font-weight: 600;
      flex: 0 0 40%;
    }

    .profile-item span {
      color: var(--text-light);
      text-align: right;
      flex: 1;
      word-break: break-word;
      background: var(--bg-light);
      padding: 6px 10px;
      border-radius: 6px;
    }

    /* ============= STATS IN PROFILE ============= */
    .profile-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-bottom: 20px;
      padding: 15px;
      background: var(--bg-light);
      border-radius: 12px;
    }

    .stat-item {
      text-align: center;
    }

    .stat-icon {
      font-size: 28px;
      margin-bottom: 8px;
    }

    .stat-number {
      font-size: 20px;
      font-weight: 800;
      color: var(--primary);
      margin-bottom: 4px;
    }

    .stat-label {
      font-size: 11px;
      color: var(--text-light);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* ============= PROFILE ACTIONS ============= */
    .profile-actions {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .profile-actions button {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-edit {
      background: var(--secondary);
      color: #fff;
    }

    .btn-edit:hover {
      background: #2980b9;
      transform: translateY(-2px);
    }

    .btn-logout {
      background: var(--tertiary);
      color: #fff;
    }

    .btn-logout:hover {
      background: #c0392b;
      transform: translateY(-2px);
    }

    /* ============= OFFERS ============= */
    .offer-slider {
      background: #fff;
      padding: 15px 0;
      margin: 20px 0;
      overflow: hidden;
      box-shadow: var(--shadow);
    }

    .offer-track {
      display: flex;
      animation: scroll 20s linear infinite;
      gap: 20px;
      padding: 0 20px;
    }

    @keyframes scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    .offer-track:hover {
      animation-play-state: paused;
    }

    .offer {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: #fff;
      padding: 12px 20px;
      border-radius: 8px;
      white-space: nowrap;
      font-weight: 600;
      font-size: 13px;
      flex-shrink: 0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    /* ============= HERO ============= */
    .hero {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: #fff;
      padding: 50px 20px;
      text-align: center;
      margin-bottom: 40px;
      position: relative;
      overflow: hidden;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 200px;
      height: 200px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }

    .hero h2 {
      font-size: 36px;
      margin-bottom: 15px;
      font-weight: 800;
      position: relative;
      z-index: 1;
    }

    .hero p {
      font-size: 16px;
      opacity: 0.95;
      max-width: 500px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }

    /* ============= SEARCH ============= */
    .search-section {
      max-width: 600px;
      margin: 20px auto;
      padding: 0 15px;
    }

    .search-box {
      background: #fff;
      border-radius: 50px;
      padding: 4px;
      display: flex;
      align-items: center;
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .search-box input {
      flex: 1;
      border: none;
      padding: 12px 18px;
      font-size: 15px;
      outline: none;
    }

    .search-box input::placeholder {
      color: var(--text-light);
    }

    .search-btn {
      background: var(--primary);
      color: #fff;
      border: none;
      padding: 12px 18px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 50%;
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .search-btn:hover {
      background: var(--primary-dark);
      transform: scale(1.05);
    }

    /* ============= PRODUCTS ============= */
    .products {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 15px 40px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 18px;
    }

    /* ============= PRODUCT CARD ============= */
    .card {
      background: #fff;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: var(--shadow);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      animation: scaleIn 0.5s ease-out;
      position: relative;
    }

    @keyframes scaleIn {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .card:hover {
      transform: translateY(-10px);
      box-shadow: var(--shadow-hover);
    }

    .card-badge {
      position: absolute;
      top: 8px;
      right: 8px;
      background: var(--tertiary);
      color: #fff;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: 700;
      z-index: 10;
    }

    .card img {
      width: 100%;
      height: 140px;
      object-fit: cover;
      background: linear-gradient(135deg, #e0e0e0 0%, #f5f5f5 100%);
      transition: transform 0.4s ease;
    }

    .card:hover img {
      transform: scale(1.12);
    }

    .card-content {
      padding: 14px;
    }

    .card h3 {
      font-size: 15px;
      color: var(--text-dark);
      margin-bottom: 6px;
      font-weight: 700;
    }

    .card-price {
      color: var(--primary);
      font-size: 18px;
      font-weight: 800;
      margin-bottom: 10px;
    }

    .card select {
      width: 100%;
      padding: 8px;
      border: 2px solid var(--border-color);
      border-radius: 6px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      background: #fff;
      margin-bottom: 8px;
      transition: all 0.3s ease;
    }

    .card select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.1);
    }

    .card-total {
      color: var(--text-light);
      font-size: 11px;
      margin-bottom: 10px;
      text-align: right;
    }

    .card button {
      width: 100%;
      padding: 10px;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .card button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.2);
      transition: left 0.5s ease;
    }

    .card button:hover::before {
      left: 100%;
    }

    .card button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(46, 204, 113, 0.3);
    }

    /* ============= BOTTOM NAVIGATION ============= */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #fff;
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 8px 0;
      box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.1);
      z-index: 99;
    }

    .nav-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      flex: 1;
      padding: 8px;
    }

    .nav-icon img {
      width: 24px;
      height: 24px;
      margin-bottom: 4px;
      filter: grayscale(100%);
      transition: filter 0.3s ease;
    }

    .nav-icon:hover img {
      filter: grayscale(0%);
    }

    .nav-icon label {
      font-size: 11px;
      font-weight: 600;
      color: var(--text-light);
      cursor: pointer;
      transition: color 0.3s ease;
    }

    .nav-icon:hover label {
      color: var(--primary);
    }

    /* ============= FOOTER ============= */
    footer {
      background: linear-gradient(135deg, var(--text-dark) 0%, #34495e 100%);
      color: #fff;
      text-align: center;
      padding: 20px;
      margin-top: 30px;
      font-size: 12px;
    }

    /* ============= RESPONSIVE ============= */
    @media (max-width: 768px) {
      .products {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 15px;
      }

      .hero h2 {
        font-size: 26px;
      }

      .profile-modal-content {
        width: 95%;
        padding: 20px;
      }

      .profile-stats {
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        padding: 12px;
      }
    }

    @media (max-width: 480px) {
      body {
        padding-bottom: 120px;
      }

      .brand-tagline {
        font-size: 16px;
      }

      .products {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        padding: 0 10px 40px;
      }

      .card {
        border-radius: 10px;
      }

      .card img {
        height: 100px;
      }

      .card h3 {
        font-size: 13px;
      }

      .card-content {
        padding: 10px;
      }

      .hero {
        padding: 35px 15px;
        margin-bottom: 30px;
      }

      .hero h2 {
        font-size: 22px;
      }

      .hero p {
        font-size: 14px;
      }

      .bottom-nav {
        padding: 5px 0;
      }

      .nav-icon img {
        width: 20px;
        height: 20px;
      }

      .nav-icon label {
        font-size: 10px;
      }

      .profile-modal-content {
        width: 100%;
        border-radius: 0;
        max-width: 100%;
      }

      .profile-stats {
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
        padding: 10px;
      }

      .stat-icon {
        font-size: 24px;
        margin-bottom: 4px;
      }

      .stat-number {
        font-size: 16px;
      }

      .stat-label {
        font-size: 10px;
      }
    }
  </style>
</head>

<body>
  <!-- Navbar -->
  <nav class="ratu-navbar">
    <div class="brand-tagline">ü•¨ Ratu Fresh ‚Äì ‡§§‡§æ‡§ú‡§º‡§ó‡•Ä ‡§π‡§∞ ‡§∏‡•Å‡§¨‡§π</div>
    <div class="notification-bell" onclick="showNotification()">
      üîî
      <span class="notification-badge" id="notifyCount">3</span>
    </div>
  </nav>

  <!-- Popup -->
  <div id="popup" class="popup"></div>

  <!-- Profile Modal (Hidden by default) -->
  <div id="profileModal" class="profile-modal">
    <div class="profile-modal-content">
      <div class="profile-modal-header">
        <h2>üë§ ‡§Æ‡•á‡§∞‡§æ ‡§ñ‡§æ‡§§‡§æ</h2>
        <button class="close-btn" onclick="closeProfile()">‚úï</button>
      </div>

      <!-- Stats -->
      <div class="profile-stats">
        <div class="stat-item">
          <div class="stat-icon">üõí</div>
          <div class="stat-number" id="ordersCount">5</div>
          <div class="stat-label">‡§ï‡•Å‡§≤ ‡§ë‡§∞‡•ç‡§°‡§∞</div>
        </div>
        <div class="stat-item">
          <div class="stat-icon">üí∞</div>
          <div class="stat-number" id="totalSpent">‚Çπ2,450</div>
          <div class="stat-label">‡§ï‡•Å‡§≤ ‡§ñ‡§∞‡•ç‡§ö</div>
        </div>
        <div class="stat-item">
          <div class="stat-icon">‚≠ê</div>
          <div class="stat-number">4.8</div>
          <div class="stat-label">‡§∞‡•á‡§ü‡§ø‡§Ç‡§ó</div>
        </div>
      </div>

      <!-- Personal Info -->
      <div class="profile-section">
        <h3>‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</h3>
        <div class="profile-item">
          <strong>üßë ‡§®‡§æ‡§Æ:</strong>
          <span id="profile-name">‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</span>
        </div>
        <div class="profile-item">
          <strong>üìß ‡§à‡§Æ‡•á‡§≤:</strong>
          <span id="profile-email">‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</span>
        </div>
        <div class="profile-item">
          <strong>üì± ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤:</strong>
          <span id="profile-phone">‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</span>
        </div>
      </div>

      <!-- Delivery Info -->
      <div class="profile-section">
        <h3>‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</h3>
        <div class="profile-item">
          <strong>üìç ‡§™‡§§‡§æ:</strong>
          <span id="profile-address">‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</span>
        </div>
        <div class="profile-item">
          <strong>üìÆ ‡§™‡§ø‡§®‡§ï‡•ã‡§°:</strong>
          <span id="profile-pincode">‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</span>
        </div>
        <div class="profile-item">
          <strong>üèòÔ∏è ‡§á‡§≤‡§æ‡§ï‡§æ:</strong>
          <span id="profile-area">‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</span>
        </div>
      </div>

      <!-- Actions -->
      <div class="profile-actions">
        <button class="btn-edit" onclick="editProfile()">‚úèÔ∏è Edit Profile</button>
        <button class="btn-logout" onclick="logout()">üö™ Logout</button>
      </div>
    </div>
  </div>

  <!-- Offers Slider -->
  <div class="offer-slider">
    <div class="offer-track">
      <div class="offer">üî• ‡§Ü‡§ú ‡§ï‡•Ä ‡§°‡•Ä‡§≤: ‡§Ü‡§≤‡•Ç ‚Çπ10/kg ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Ç!</div>
      <div class="offer">üöö ‡§´‡•ç‡§∞‡•Ä ‡§π‡•ã‡§Æ ‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä Ratu ‡§Æ‡•á‡§Ç</div>
      <div class="offer">ü•¶ ‡§§‡§æ‡§ú‡§º‡§æ ‡§∏‡§¨‡•ç‡§ú‡§º‡§ø‡§Ø‡§æ‡§Å ‡§π‡§∞ ‡§∏‡•Å‡§¨‡§π</div>
      <div class="offer">üí∞ ‚Çπ199 ‡§∏‡•á ‡§ä‡§™‡§∞ ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§™‡§∞ 5% ‡§õ‡•Ç‡§ü</div>
      <div class="offer">‚≠ê ‡§π‡§Æ‡•á‡§Ç 4.8‚òÖ ‡§∞‡•á‡§ü‡§ø‡§Ç‡§ó ‡§Æ‡§ø‡§≤‡•Ä!</div>
    </div>
  </div>

  <!-- Hero Section -->
  <div class="hero">
    <h2>üõí ‡§§‡§æ‡§ú‡§º‡•Ä ‡§∏‡§¨‡•ç‡§ú‡§º‡§ø‡§Ø‡§æ‡§Å ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è</h2>
    <p>‡§∏‡•Ä‡§ß‡•á ‡§ñ‡•á‡§§ ‡§∏‡•á ‡§Ü‡§™‡§ï‡•á ‡§∞‡§∏‡•ã‡§à ‡§§‡§ï - ‡§π‡§∞ ‡§¶‡§ø‡§® ‡§®‡§à ‡§°‡•Ä‡§≤ ‡§î‡§∞ ‡§ë‡§´‡§∞!</p>
  </div>

  <!-- Search -->
  <div class="search-section">
    <div class="search-box">
      <input type="text" id="searchInput" placeholder="üîç ‡§∏‡§¨‡•ç‡§ú‡•Ä ‡§ñ‡•ã‡§ú‡•á‡§Ç..." onkeyup="filterProducts()">
      <button class="search-btn" onclick="filterProducts()">üîç</button>
    </div>
  </div>

  <!-- Products -->
  <section class="products" id="productSection"></section>

  <!-- Bottom Navigation -->
  <div class="bottom-nav">
    <span class="nav-icon" onclick="scrollToSection('productSection')">
      <img src="https://cdn-icons-png.flaticon.com/512/1170/1170678.png" alt="Shop" />
      <label>‡§ñ‡§∞‡•Ä‡§¶‡•á‡§Ç</label>
    </span>
    <span class="nav-icon" onclick="goToCart()">
      <img src="https://cdn-icons-png.flaticon.com/512/893/893257.png" alt="Cart" />
      <label>‡§ï‡§æ‡§∞‡•ç‡§ü</label>
    </span>
    <span class="nav-icon" onclick="goToOrders()">
      <img src="https://cdn-icons-png.flaticon.com/512/3500/3500833.png" alt="Orders" />
      <label>‡§ë‡§∞‡•ç‡§°‡§∞</label>
    </span>
    <span class="nav-icon" onclick="openProfile()">
      <img src="https://cdn-icons-png.flaticon.com/512/9131/9131529.png" alt="Profile" />
      <label>‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤</label>
    </span>
  </div>

  <!-- Footer -->
  <footer>
    ¬© 2025 Chandan Yadav, Ratu Jharkhand. All rights reserved. | üì± 24/7 ‡§∏‡§™‡•ã‡§∞‡•ç‡§ü
  </footer>

  <script>
    // ============= CONSTANTS =============
    const API_BASE_URL = 'https://my-web-xrr5.onrender.com';
    const REQUEST_TIMEOUT = 10000;

    // ============= PRODUCTS DATA =============
    const products = [
      { id: 'aloo', name: '‡§Ü‡§≤‡•Ç', price: 20, emoji: 'ü•î', img: 'https://upload.wikimedia.org/wikipedia/commons/a/ab/Patates.jpg' },
      { id: 'tomato', name: '‡§ü‡§Æ‡§æ‡§ü‡§∞', price: 30, emoji: 'üçÖ', img: 'https://upload.wikimedia.org/wikipedia/commons/8/89/Tomato_je.jpg' },
      { id: 'onion', name: '‡§™‡•ç‡§Ø‡§æ‡§ú‡§º', price: 25, emoji: 'üßÖ', img: 'https://media.istockphoto.com/id/1181631588/photo/onions-for-sale-in-the-weekly-market-malkapur-maharashtra.webp?a=1&b=1&s=612x612&w=0&k=20&c=dzL0b1DNEWUehYWVqYzY9qE-ZK88KJgO6eY-etuQYoc=' },
      { id: 'bhindi', name: '‡§≠‡§ø‡§Ç‡§°‡•Ä', price: 35, emoji: 'üå±', img: 'https://media.istockphoto.com/id/1503362390/photo/okra-over-wooden-table-background-cut-okra-and-whole-ladys-finger.jpg?s=1024x1024&w=is&k=20&c=xYk1xHhyPEMiZzYxaBu5IMyqXK3qdrlCVVFh8Yy4GgM=' },
      { id: 'lauki', name: '‡§≤‡•å‡§ï‡•Ä', price: 18, emoji: 'ü•í', img: 'https://media.istockphoto.com/id/1194258667/photo/bottle-gourd-for-sale-in-market.jpg?s=1024x1024&w=is&k=20&c=rmDr-KGaiUEaxCqaEQ6e_MakDj6klaXYE-StTySjPUM=' },
      { id: 'karela', name: '‡§ï‡§∞‡•á‡§≤‡§æ', price: 28, emoji: 'ü•í', img: 'https://media.istockphoto.com/id/472402096/photo/top-view-of-green-bitter-gourds-in-the-basket.jpg?s=612x612&w=0&k=20&c=n7Ua0o7X4Qe_FSfl38ufHIPslxofgkyNpa2Z2NXmBfM=' },
      { id: 'gajar', name: '‡§ó‡§æ‡§ú‡§∞', price: 22, emoji: 'ü•ï', img: 'https://images.unsplash.com/photo-1633380110125-f6e685676160?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8Y2Fycm90fGVufDB8fDB8fHww&auto=format&fit=crop&q=60&w=600' },
      { id: 'mooli', name: '‡§Æ‡•Ç‡§≤‡•Ä', price: 15, emoji: 'üåø', img: 'https://media.istockphoto.com/id/903099876/photo/fresh-vegetable-for-sale-on-market-in-india.webp?a=1&b=1&s=612x612&w=0&k=20&c=9oElMWTKZOzIny5ND9MESWmEgG-ONAINWzQL8tSrF04=' },
      { id: 'baingan', name: '‡§¨‡•à‡§Ç‡§ó‡§®', price: 26, emoji: 'üçÜ', img: 'https://images.unsplash.com/photo-1613881553903-4543f5f2cac9?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8YnJpbmphbHxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&q=60&w=600' },
      { id: 'shimla', name: '‡§∂‡§ø‡§Æ‡§≤‡§æ ‡§Æ‡§ø‡§∞‡•ç‡§ö', price: 40, emoji: 'ü´ë', img: 'https://media.istockphoto.com/id/137350104/photo/green-peppers.webp?a=1&b=1&s=612x612&w=0&k=20&c=7u2DZpZoSZIWkSDyvAbxkvNU09BrvPdQCPzM4LcsxvU=' },
      { id: 'mirch', name: '‡§π‡§∞‡•Ä ‡§Æ‡§ø‡§∞‡•ç‡§ö', price: 45, emoji: 'üå∂Ô∏è', img: 'https://media.istockphoto.com/id/942849220/photo/ripe-green-chilli-pepper.webp?a=1&b=1&s=612x612&w=0&k=20&c=qsUq5pSQ7j7T4O8UMEUiSgdSSt5DlKybwc7QS_o9Oao=' },
      { id: 'palak', name: '‡§™‡§æ‡§≤‡§ï', price: 20, emoji: 'ü•¨', img: 'https://images.unsplash.com/photo-1576045057995-568f588f82fb?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8U3BpbmFjaHxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&q=60&w=600' },
      { id: 'methi', name: '‡§Æ‡•á‡§•‡•Ä', price: 22, emoji: 'üåø', img: 'https://media.istockphoto.com/id/153556198/photo/methi.webp?a=1&b=1&s=612x612&w=0&k=20&c=-wKqvG-vDYf-QVH8D3P2TAxMk-Eryd6haPNtsQBxGrk=' },
      { id: 'sarso', name: '‡§∏‡§∞‡§∏‡•ã‡§Ç', price: 24, emoji: 'üå±', img: 'https://media.istockphoto.com/id/641036946/photo/edible-mustard-leaves.webp?a=1&b=1&s=612x612&w=0&k=20&c=gIn92_8eHjFUDcWkN14jJL3ku7nhrnw5BtshSCdsW0c=' },
      { id: 'patta', name: '‡§™‡§§‡•ç‡§§‡§æ ‡§ó‡•ã‡§≠‡•Ä', price: 19, emoji: 'ü•¨', img: 'https://media.istockphoto.com/id/2225922723/photo/fresh-green-cabbages-in-a-market-basket.webp?a=1&b=1&s=612x612&w=0&k=20&c=CTgx7YR6b8cJq1jLs0UbelWSqN0dx9N4t3z7pk8b27U=' },
      { id: 'phool', name: '‡§´‡•Ç‡§≤ ‡§ó‡•ã‡§≠‡•Ä', price: 30, emoji: 'ü•¶', img: 'https://media.istockphoto.com/id/1372304664/photo/group-of-cauliflower-fresh-cauliflower-for-sale-at-a-market.webp?a=1&b=1&s=612x612&w=0&k=20&c=lEwN90TtHLVx-r3U9GRyRKmXKzfW4tdeUWRWAcOCX7k=' },
      { id: 'lemon', name: '‡§®‡•Ä‡§Ç‡§¨‡•Ç', price: 10, emoji: 'üçã', img: 'https://media.istockphoto.com/id/871706470/photo/group-of-fresh-lemon-on-an-old-vintage-wooden-table.webp?a=1&b=1&s=612x612&w=0&k=20&c=y-meMhMc9CK-Mtz8vM6JRaIOEeiXPcnbdsGca-KCogM=' },
      { id: 'lahsoon', name: '‡§≤‡§π‡§∏‡•Å‡§®', price: 21, emoji: 'üßÑ', img: 'https://media.istockphoto.com/id/531644839/photo/garlic.webp?a=1&b=1&s=612x612&w=0&k=20&c=kABuNBJXIiwWun2GETzq_Gn_u3M9MlxgTfBFLOZYrnU=' },
      { id: 'arbi', name: '‡§Ö‡§∞‡§¨‡•Ä', price: 27, emoji: 'üå±', img: 'https://media.istockphoto.com/id/1200642688/photo/eddoes.webp?a=1&b=1&s=612x612&w=0&k=20&c=HWw27eB0yUyGaP8SDrOktNkL8_Jj9kmBskf5wsZ9u8U=' },
      { id: 'chana', name: '‡§π‡§∞‡§æ ‡§ö‡§®‡§æ', price: 32, emoji: 'üåæ', img: 'https://media.istockphoto.com/id/899854420/photo/fresh-green-chickpeas-or-chick-peas-also-known-as-harbara-or-harbhara-in-hindi-and-cicer-is.webp?a=1&b=1&s=612x612&w=0&k=20&c=B_zR-xU5c5WDsJTvZKJAq2MkTJwJ--autmPGFPPoQ3w=' }
    ];

    // ============= UTILITY FUNCTIONS =============
    function showPopup(message, type = 'success') {
      const popup = document.getElementById("popup");
      popup.textContent = message;
      popup.className = `popup show ${type}`;
      setTimeout(() => popup.classList.remove('show'), 3000);
      console.log(type === 'success' ? '‚úÖ' : '‚ùå', message);
    }

    function el(id) {
      return document.getElementById(id);
    }

    // ============= PROFILE MODAL FUNCTIONS =============
    function openProfile() {
      el("profileModal").classList.add("show");
      loadUserProfile();
      console.log("üë§ Profile opened");
    }

    function closeProfile() {
      el("profileModal").classList.remove("show");
      console.log("üë§ Profile closed");
    }

    // ============= RENDER PRODUCTS =============
    function renderProducts() {
      const section = el("productSection");
      
      section.innerHTML = products.map(prod => {
        const quantityOptions = Array.from({ length: 10 }, (_, i) => {
          const q = i + 1;
          return `<option value="${q}" ${q === 1 ? 'selected' : ''}>${q} ‡§ï‡§ø‡§≤‡•ã</option>`;
        }).join('');

        return `
          <div class="card">
            <div class="card-badge">‡§®‡§à</div>
            <img src="${prod.img}" alt="${prod.emoji} ${prod.name}" loading="lazy" />
            <div class="card-content">
              <h3>${prod.emoji} ${prod.name}</h3>
              <div class="card-price">‚Çπ${prod.price}</div>
              <select id="qty-${prod.id}" onchange="updatePrice('${prod.id}', ${prod.price})">
                ${quantityOptions}
              </select>
              <div class="card-total" id="price-${prod.id}">‚Çπ${prod.price}</div>
              <button onclick="addToCart('${prod.name}', '${prod.emoji}', ${prod.price}, 'qty-${prod.id}')">
                üõí ‡§ú‡•ã‡§°‡§º‡•á‡§Ç
              </button>
            </div>
          </div>
        `;
      }).join('');

      console.log("‚úÖ Products rendered:", products.length);
    }

    // ============= UPDATE PRICE =============
    function updatePrice(id, rate) {
      const qty = parseFloat(el(`qty-${id}`).value);
      const total = Math.round(rate * qty);
      el(`price-${id}`).textContent = `‚Çπ${total}`;
    }

    // ============= ADD TO CART =============
    async function addToCart(name, emoji, rate, selectId) {
      try {
        const user = JSON.parse(localStorage.getItem("userData"));
        const token = localStorage.getItem("token");

        if (!user || !user._id || !token) {
          showPopup("‚ùå ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç", 'error');
          window.location.href = "login.html";
          return;
        }

        const qty = parseFloat(el(selectId).value);
        const total = Math.round(rate * qty);

        console.log("üîÑ Adding to cart:", { name, qty, total });

        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), REQUEST_TIMEOUT);

        const res = await fetch(`${API_BASE_URL}/cart/add/${user._id}`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${token}`
          },
          body: JSON.stringify({
            productId: name,
            name,
            qty,
            price: rate
          }),
          signal: controller.signal
        });

        clearTimeout(timeoutId);
        const data = await res.json();

        if (res.ok && data.message) {
          showPopup(`‚úÖ ${emoji} ${name} ‡§ï‡§æ‡§∞‡•ç‡§ü ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ!`);
        } else {
          throw new Error(data.error || "‡§ï‡§æ‡§∞‡•ç‡§ü ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ");
        }
      } catch (err) {
        console.error("‚ùå Error:", err);
        showPopup("‚ùå ‡§ï‡§æ‡§∞‡•ç‡§ü ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ", 'error');
      }
    }

    // ============= LOAD PROFILE =============
    function loadUserProfile() {
      try {
        const user = JSON.parse(localStorage.getItem("userData"));

        if (user && user._id) {
          el("profile-name").textContent = user.name || "‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ";
          el("profile-email").textContent = user.email || "‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ";
          el("profile-phone").textContent = user.phone || "‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ";
          el("profile-address").textContent = user.address || "‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ";
          el("profile-pincode").textContent = user.pincode || "‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ";
          el("profile-area").textContent = user.area || "‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ";
          
          console.log("‚úÖ Profile loaded");
        } else {
          showPopup("‚ùå User data ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ", 'error');
        }
      } catch (err) {
        console.error("‚ùå Error:", err);
      }
    }

    // ============= FILTER PRODUCTS =============
    function filterProducts() {
      const input = el("searchInput").value.toLowerCase();
      const cards = document.querySelectorAll(".card");

      let visibleCount = 0;
      cards.forEach(card => {
        const name = card.querySelector("h3").textContent.toLowerCase();
        const isVisible = name.includes(input) || input === '';
        card.style.display = isVisible ? "block" : "none";
        if (isVisible) visibleCount++;
      });

      console.log(`üîç Found: ${visibleCount} products`);
    }

    // ============= LOGOUT =============
    function logout() {
      if (confirm("‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§Ü‡§™ logout ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?")) {
        localStorage.clear();
        showPopup("‚úÖ ‡§Ü‡§™ logout ‡§π‡•ã ‡§ó‡§è ‡§π‡•à‡§Ç");
        setTimeout(() => window.location.href = "login.html", 1500);
      }
    }

    // ============= EDIT PROFILE =============
    function editProfile() {
      showPopup("üìù ‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤ ‡§è‡§°‡§ø‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§´‡•Ä‡§ö‡§∞ ‡§ú‡§≤‡•ç‡§¶ ‡§Ü ‡§∞‡§π‡§æ ‡§π‡•à!", 'warning');
    }

    // ============= SHOW NOTIFICATION =============
    function showNotification() {
      showPopup("üì¨ ‡§Ü‡§™‡§ï‡•ã 3 ‡§®‡§à ‡§°‡•Ä‡§≤ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§π‡•à!");
    }

    // ============= SCROLL TO SECTION =============
    function scrollToSection(sectionId) {
      const section = el(sectionId);
      if (section) {
        section.scrollIntoView({ behavior: 'smooth' });
      }
    }

    // ============= GO TO CART =============
    function goToCart() {
      const token = localStorage.getItem("token");
      if (token) {
        window.location.href = "cart.html";
        console.log("üõí Going to cart");
      } else {
        showPopup("‚ùå ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç", 'error');
        window.location.href = "login.html";
      }
    }

    // ============= GO TO ORDERS =============
    function goToOrders() {
      const token = localStorage.getItem("token");
      if (token) {
        window.location.href = "order.html";
        console.log("üì¶ Going to orders");
      } else {
        showPopup("‚ùå ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç", 'error');
        window.location.href = "login.html";
      }
    }

    // ============= PAGE LOAD =============
    window.addEventListener('DOMContentLoaded', () => {
      console.log("‚úÖ Profile page loaded");

      const token = localStorage.getItem("token");
      const user = JSON.parse(localStorage.getItem("userData"));

      if (!token || !user || !user._id) {
        console.warn("‚ùå No valid session");
        localStorage.clear();
        window.location.replace("login.html");
        return;
      }

      renderProducts();
      console.log("‚úÖ Page initialized");
    });

    // ============= ERROR HANDLING =============
    window.addEventListener('error', (event) => {
      console.error('‚ùå Global error:', event.error);
    });
  </script>
</body>
</html>
